--------------------------------------------------------
--  Script base de donnees de location d'outils
--------------------------------------------------------
--  GP Gregoire & JF Brodeur - BdeB , inspire de
--  (c) Laura Francheri - BdeB
--------------------------------------------------------


-- Reinitialiser

DROP TABLE OUTILS_EMPRUNT;
DROP TABLE OUTILS_USAGER;
DROP TABLE OUTILS_OUTIL;

/

--------------------------------------------------------
--  DDL for Table OUTILS_USAGER
--------------------------------------------------------


  CREATE TABLE "OUTILS_USAGER" 
   (	"NUM_USAGER" NUMBER, 
	"NOM_FAMILLE" VARCHAR2(50), 
	"PRENOM" VARCHAR2(50), 
	"DATE_NAISSANCE" DATE, 
	"ADRESSE" VARCHAR2(100), 
	"VILLE" VARCHAR2(50), 
	"COURRIEL" VARCHAR2(50), 
	"TELEPHONE" VARCHAR2(50), 
	"DATE_ENREGISTREMENT" DATE DEFAULT sysdate
   ) ;
/
-- INSERTING into OUTILS_USAGER
SET DEFINE OFF;
INSERT INTO OUTILS_USAGER (NUM_USAGER,NOM_FAMILLE,PRENOM,DATE_NAISSANCE,ADRESSE,VILLE,COURRIEL,TELEPHONE,DATE_ENREGISTREMENT) VALUES ('123','Gregoire','Pierre',to_date('59-04-17','YYYY-MM-DD'),'Hilton Hotel','Vancouver','PGregoire@gmail.com','450-555-1234',to_date('14-01-15','YYYY-MM-DD'));
INSERT INTO OUTILS_USAGER (NUM_USAGER,NOM_FAMILLE,PRENOM,DATE_NAISSANCE,ADRESSE,VILLE,COURRIEL,TELEPHONE,DATE_ENREGISTREMENT) VALUES ('234','Winchester','Roger',to_date('53-09-05','YYYY-MM-DD'),'1 Sherbrooke Est','Winnipeg','RW@gmail.com','514-555-2222',to_date('14-01-15','YYYY-MM-DD'));
INSERT INTO OUTILS_USAGER (NUM_USAGER,NOM_FAMILLE,PRENOM,DATE_NAISSANCE,ADRESSE,VILLE,COURRIEL,TELEPHONE,DATE_ENREGISTREMENT) VALUES ('345','Trudeau','Marcel',to_date('74-01-20','YYYY-MM-DD'),'1 Sherbrooke Ouest','Regina','Mtrud@hotmail.com','514-555-3030',to_date('14-01-15','YYYY-MM-DD'));
INSERT INTO OUTILS_USAGER (NUM_USAGER,NOM_FAMILLE,PRENOM,DATE_NAISSANCE,ADRESSE,VILLE,COURRIEL,TELEPHONE,DATE_ENREGISTREMENT) VALUES ('456','Sillery','Sylvie',to_date('79-04-26','YYYY-MM-DD'),'22 Rue Ici','Toronto','Sylsis@hotmail.com','450-555-1313',to_date('14-01-15','YYYY-MM-DD'));
INSERT INTO OUTILS_USAGER (NUM_USAGER,NOM_FAMILLE,PRENOM,DATE_NAISSANCE,ADRESSE,VILLE,COURRIEL,TELEPHONE,DATE_ENREGISTREMENT) VALUES ('567','Moquin','Roger',to_date('62-11-17','YYYY-MM-DD'),'34565 Henri-Bourassa','Winnipeg','roger@gmail.com','666-666-6666',to_date('14-01-15','YYYY-MM-DD'));
INSERT INTO OUTILS_USAGER (NUM_USAGER,NOM_FAMILLE,PRENOM,DATE_NAISSANCE,ADRESSE,VILLE,COURRIEL,TELEPHONE,DATE_ENREGISTREMENT) VALUES ('678','McKay','Peter',to_date('68-03-30','YYYY-MM-DD'),'10555 Bois-de-Boulogne','Vancouver','PM@PM.com','450-555-0303',to_date('14-01-15','YYYY-MM-DD'));
--------------------------------------------------------
--  DDL for Index OUTILS1_USAGER_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "OUTILS1_USAGER_PK" ON "OUTILS_USAGER" ("NUM_USAGER");
/
--------------------------------------------------------
--  DDL for Index OUTILS1_USAGER_UQ_TEL
--------------------------------------------------------

  CREATE UNIQUE INDEX "OUTILS1_USAGER_UQ_TEL" ON "OUTILS_USAGER" ("TELEPHONE");
/
--------------------------------------------------------
--  Constraints for Table OUTILS_USAGER
--------------------------------------------------------

  ALTER TABLE "OUTILS_USAGER" ADD CONSTRAINT "OUTILS1_USAGER_PK" PRIMARY KEY ("NUM_USAGER") ENABLE;
  ALTER TABLE "OUTILS_USAGER" ADD CONSTRAINT "OUTILS1_USAGER_UQ_TEL" UNIQUE ("TELEPHONE") ENABLE;
  ALTER TABLE "OUTILS_USAGER" MODIFY ("DATE_ENREGISTREMENT" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("TELEPHONE" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("COURRIEL" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("VILLE" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("ADRESSE" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("PRENOM" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("NOM_FAMILLE" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_USAGER" MODIFY ("NUM_USAGER" NOT NULL ENABLE);
/


--------------------------------------------------------
--  DDL for Table OUTILS_OUTIL
--------------------------------------------------------

  CREATE TABLE "OUTILS_OUTIL" 
   (	"CODE_OUTIL" VARCHAR2(20), 
	"NOM" VARCHAR2(50), 
	"FABRICANT" VARCHAR2(50), 
	"CARACTERISTIQUES" VARCHAR2(500), 
	"ANNEE" NUMBER, 
	"PRIX" NUMBER
   ) ; 
/
-- INSERTING into OUTILS_OUTIL
SET DEFINE OFF;
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('PE789','Perceuse','Black And Decker','90 watt, verte, batterie','2006','150');
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('MA890','Marteau','Stanley','15 once','2000','850');
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('PE678','Perceuse','Makita','20 volt, jaune, efficace','2009','250');
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('TU567','Tournevis','Dewalt','richardson, 20 volt','2009','350');
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('TO456','Toupie','Makita','plusieurs meches, grise','2008','550');
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('BS345','Banc de scie','Porter Cable','20 volt, cable, lame 9 pouces','2008','600');
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('SC234','Scie','Makita','90 watt, efficace, jaune, lourde','2007',NULL);
INSERT INTO OUTILS_OUTIL (CODE_OUTIL,NOM,FABRICANT,CARACTERISTIQUES,ANNEE,PRIX) VALUES ('TO123','Tour','Stanley','difficile a bouger','2002',NULL);
--------------------------------------------------------
--  DDL for Index OUTILS1_OUTIL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "OUTILS1_OUTIL_PK" ON "OUTILS_OUTIL" ("CODE_OUTIL");
/

--------------------------------------------------------
--  Constraints for Table OUTILS_OUTIL
--------------------------------------------------------

  ALTER TABLE "OUTILS_OUTIL" ADD CONSTRAINT "OUTILS1_OUTIL_PK" PRIMARY KEY ("CODE_OUTIL") ENABLE;
  ALTER TABLE "OUTILS_OUTIL" MODIFY ("ANNEE" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_OUTIL" MODIFY ("NOM" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_OUTIL" MODIFY ("CODE_OUTIL" NOT NULL ENABLE);
/

--------------------------------------------------------
--  DDL for Table OUTILS_EMPRUNT
--------------------------------------------------------
 CREATE TABLE "OUTILS_EMPRUNT" 
   (	"NUM_EMPRUNT" NUMBER, 
	"NUM_USAGER" NUMBER, 
	"CODE_OUTIL" VARCHAR2(20), 
	"DATE_EMPRUNT" DATE, 
	"DATE_RETOUR" DATE
   ) ;
/
-- INSERTING into OUTILS_EMPRUNT
SET DEFINE OFF;
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123451','123','PE789',to_date('2013-12-20','YYYY-MM-DD'),null);
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123452','123','MA890',to_date('2013-12-21','YYYY-MM-DD'),to_date('2014-01-15','YYYY-MM-DD'));
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123453','345','TO123',to_date('2014-01-01','YYYY-MM-DD'),to_date('2014-01-05','YYYY-MM-DD'));
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123454','345','MA890',to_date('2014-01-08','YYYY-MM-DD'),NULL);
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123455','567','TU567',to_date('2015-01-09','YYYY-MM-DD'),NULL);
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123456','567','TO456',to_date('2015-01-17','YYYY-MM-DD'),to_date('2015-01-19','YYYY-MM-DD'));
INSERT INTO OUTILS_EMPRUNT (NUM_EMPRUNT,NUM_USAGER,CODE_OUTIL,DATE_EMPRUNT,DATE_RETOUR) VALUES ('123457','678','TO456',to_date('2016-01-19','YYYY-MM-DD'),NULL);

--------------------------------------------------------
--  DDL for Index OUTILS1_EMPRUNT_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "OUTILS1_EMPRUNT_PK" ON "OUTILS_EMPRUNT" ("NUM_EMPRUNT");
/
--------------------------------------------------------
--  Constraints for Table OUTILS_EMPRUNT
--------------------------------------------------------

  ALTER TABLE "OUTILS_EMPRUNT" ADD CONSTRAINT "OUTILS_EMPRUNT_PK" PRIMARY KEY ("NUM_EMPRUNT") ENABLE;
  ALTER TABLE "OUTILS_EMPRUNT" MODIFY ("DATE_EMPRUNT" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_EMPRUNT" MODIFY ("CODE_OUTIL" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_EMPRUNT" MODIFY ("NUM_USAGER" NOT NULL ENABLE);
  ALTER TABLE "OUTILS_EMPRUNT" MODIFY ("NUM_EMPRUNT" NOT NULL ENABLE);
/
--------------------------------------------------------
--  Ref Constraints for Table OUTILS_EMPRUNT
--------------------------------------------------------

  ALTER TABLE "OUTILS_EMPRUNT" ADD CONSTRAINT "FK_OUTILS1_EMPRUNT_CLIENT" FOREIGN KEY ("NUM_USAGER")
	  REFERENCES "OUTILS_USAGER" ("NUM_USAGER") ENABLE;
  ALTER TABLE "OUTILS_EMPRUNT" ADD CONSTRAINT "FK_OUTILS1_EMPRUNT_FILM" FOREIGN KEY ("CODE_OUTIL")
	  REFERENCES "OUTILS_OUTIL" ("CODE_OUTIL") ENABLE;
/
